generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id                  String   @id @default(cuid())
  employerId          String?  @unique
  email               String   @unique
  name                String
  password            String?
  role                String   @default("APPLICANT")
  image               String?
  bio                 String?
  phone               String?
  location            String?
  website             String?
  companyName         String?
  employerType        String?  // "COMPANY", "AGENCY", "CLIENT"
  contactEmail        String?
  contactPhone        String?
  contactWebsite      String?
  
  // Applicant-specific fields
  education           String?
  experienceLevel     String?  // "entry", "mid", "senior", "executive"
  skills              String?
  resume              String?
  
  // Employer balance wallet
  adBalance           Float    @default(0)  // $1 = 1000 impressions
  
  // Subscription fields
  hasVerifiedBadge    Boolean  @default(false)
  verifiedBadgeExpiry DateTime?
  hasUnlimitedSponsored Boolean @default(false)
  unlimitedSponsoredExpiry DateTime?
  
  isVerified          Boolean  @default(false)
  verificationStatus  String   @default("NOT_SUBMITTED")
  
  averageRating       Float    @default(0)
  totalReviews        Int      @default(0)
  completedHires      Int      @default(0)
  responseRate        Float    @default(0)
  
  // Admin 2FA fields
  twoFactorSecret     String?
  twoFactorEnabled    Boolean  @default(false)
  lastLoginAt         DateTime?
  lastLoginIp         String?
  loginAttempts       Int      @default(0)
  lockedUntil         DateTime?
  adminSecurityKey    String?
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  jobs                Job[]
  applications        Application[]
  givenReviews        Review[]                @relation("ReviewGiver")
  receivedReviews     Review[]                @relation("ReviewReceiver")
  verificationDocs    VerificationDocument[]
  badges              UserBadge[]
  notifications       Notification[]
  publicComments      PublicComment[]
  employerReviewsReceived EmployerReview[] @relation("EmployerReviews")
  employerReviewsGiven    EmployerReview[] @relation("GivenEmployerReviews")
  savedJobs           SavedJob[]
  balanceTransactions BalanceTransaction[]
  jobImpressions      JobImpression[]
  subscriptions       Subscription[]
  jobLikes            JobLike[]
  applicantProfile    ApplicantProfile?
  
  // New enhanced features relations
  jobAlerts           JobAlert[]
  resumes             Resume[]
  coverLetters        CoverLetter[]
  interviewPreps      InterviewPrep[]
  jobComparisons      JobComparison[]
  applicationStats    ApplicationStats?
  skillsGapAnalyses   SkillsGapAnalysis[]

  @@index([email])
  @@index([role])
  @@index([verificationStatus])
  @@index([averageRating])
  @@index([createdAt])
}

model Job {
  id                  String   @id @default(cuid())
  title               String
  company             String
  clientCompanyName   String?  // For AGENCY: company they're recruiting for
  location            String?  // Optional for CLIENT type
  locationLat         Float?
  locationLng         Float?
  workMode            String   @default("onsite")  // "remote", "onsite", "hybrid"
  type                String
  category            String?  // Job category like "Technology", "Healthcare", etc.
  description         String
  applyUrl            String
  acceptApplicationsHere Boolean @default(false)
  status              String   @default("pending")
  
  salaryMin           Int?
  salaryMax           Int?
  salaryCurrency      String   @default("USD")
  currency            String   @default("USD")
  
  degreeRequired      Boolean  @default(false)
  degreeType          String?
  experienceRequired  String?
  yearsOfExperience   Int?
  
  careerLink          String?
  contactEmail        String?
  contactPhone        String?
  
  // Sponsored job fields
  isSponsored         Boolean  @default(false)
  sponsoredUntil      DateTime?
  impressionLimit     Int?     // Total impressions purchased
  impressionsUsed     Int      @default(0)
  costPerImpression   Float    @default(0.001)  // $1 per 1000 impressions
  
  // Targeting filters for sponsored jobs
  targetLocation      String?
  targetExperience    String?  // "entry", "mid", "senior", "executive"
  targetEducation     String?  // "high_school", "bachelor", "master", "phd"
  
  // Engagement metrics
  likesCount          Int      @default(0)
  commentsCount       Int      @default(0)
  viewsCount          Int      @default(0)
  applicationsCount   Int      @default(0)
  engagementScore     Float    @default(0)  // Calculated: (likes × 2) + (comments × 1)
  
  employerId          String
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  employer            User     @relation(fields: [employerId], references: [id], onDelete: Cascade)
  applications        Application[]
  publicComments      PublicComment[]
  savedBy             SavedJob[]
  impressions         JobImpression[]
  likes               JobLike[]
  fitCriteria         JobFitCriteria?
  fitScores           JobFitScore[]

  @@index([employerId])
  @@index([status])
  @@index([type])
  @@index([location])
  @@index([createdAt])
  @@index([experienceRequired])
  @@index([isSponsored])
  @@index([sponsoredUntil])
}

model Application {
  id                  String   @id @default(cuid())
  jobId               String
  applicantId         String
  status              String   @default("pending")
  appliedAt           DateTime @default(now())
  hiredAt             DateTime?
  
  employerReviewed    Boolean  @default(false)
  applicantReviewed   Boolean  @default(false)
  reviewReminderSent  Boolean  @default(false)

  job                 Job      @relation(fields: [jobId], references: [id], onDelete: Cascade)
  applicant           User     @relation(fields: [applicantId], references: [id], onDelete: Cascade)
  reviews             Review[]
  notes               ApplicationNote[]

  @@unique([jobId, applicantId])
  @@index([applicantId])
  @@index([jobId])
  @@index([status])
  @@index([appliedAt])
}

model Review {
  id                  String   @id @default(cuid())
  applicationId       String
  reviewerId          String
  revieweeId          String
  reviewType          String
  
  overallRating       Int
  communication       Int?
  professionalism     Int?
  punctuality         Int?
  skills              Int?
  fairness            Int?
  workEnvironment     Int?
  paymentTimeliness   Int?
  
  comment             String?
  isVisible           Boolean  @default(false)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  application         Application @relation(fields: [applicationId], references: [id], onDelete: Cascade)
  reviewer            User     @relation("ReviewGiver", fields: [reviewerId], references: [id], onDelete: Cascade)
  reviewee            User     @relation("ReviewReceiver", fields: [revieweeId], references: [id], onDelete: Cascade)

  @@index([revieweeId])
  @@index([reviewerId])
  @@index([applicationId])
  @@index([reviewType])
  @@index([isVisible])
  @@index([createdAt])
}

model Badge {
  id                  String   @id @default(cuid())
  name                String   @unique
  description         String
  icon                String
  type                String
  
  minRating           Float?
  minReviews          Int?
  minCompletedHires   Int?
  requiresVerification Boolean @default(false)
  
  createdAt           DateTime @default(now())

  userBadges          UserBadge[]

  @@index([type])
}

model UserBadge {
  id                  String   @id @default(cuid())
  userId              String
  badgeId             String
  earnedAt            DateTime @default(now())

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  badge               Badge    @relation(fields: [badgeId], references: [id], onDelete: Cascade)

  @@unique([userId, badgeId])
  @@index([userId])
  @@index([badgeId])
}

model VerificationDocument {
  id                  String   @id @default(cuid())
  userId              String
  documentType        String
  documentUrl         String
  submittedAt         DateTime @default(now())

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

model PublicComment {
  id                  String   @id @default(cuid())
  jobId               String
  authorId            String
  title               String?
  comment             String
  rating              Int?
  isVisible           Boolean  @default(true)
  isAnonymous         Boolean  @default(false)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  job                 Job      @relation(fields: [jobId], references: [id], onDelete: Cascade)
  author              User     @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@index([jobId])
  @@index([authorId])
  @@index([isVisible])
  @@index([createdAt])
}

model EmployerReview {
  id                  String   @id @default(cuid())
  employerId          String
  reviewerId          String
  rating              Int
  comment             String
  isAnonymous         Boolean  @default(false)
  isVisible           Boolean  @default(true)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  employer            User     @relation("EmployerReviews", fields: [employerId], references: [id], onDelete: Cascade)
  reviewer            User     @relation("GivenEmployerReviews", fields: [reviewerId], references: [id], onDelete: Cascade)

  @@index([employerId])
  @@index([reviewerId])
  @@index([isVisible])
  @@index([createdAt])
}

model Notification {
  id                  String   @id @default(cuid())
  userId              String
  type                String
  title               String
  message             String
  link                String?
  read                Boolean  @default(false)
  emailSent           Boolean  @default(false)
  createdAt           DateTime @default(now())

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([read])
  @@index([createdAt])
}

model SavedJob {
  id                  String   @id @default(cuid())
  userId              String
  jobId               String
  createdAt           DateTime @default(now())

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  job                 Job      @relation(fields: [jobId], references: [id], onDelete: Cascade)

  @@unique([userId, jobId])
  @@index([userId])
  @@index([jobId])
}

model BalanceTransaction {
  id                  String   @id @default(cuid())
  userId              String
  amount              Float
  type                String   // "topup", "deduction", "refund"
  description         String
  balanceBefore       Float
  balanceAfter        Float
  relatedJobId        String?
  createdAt           DateTime @default(now())

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([type])
  @@index([createdAt])
}

model JobImpression {
  id                  String   @id @default(cuid())
  jobId               String
  userId              String?  // null for guest views
  ipAddress           String?
  userAgent           String?
  isTargeted          Boolean  @default(false)  // Whether impression matched targeting
  createdAt           DateTime @default(now())

  job                 Job      @relation(fields: [jobId], references: [id], onDelete: Cascade)
  user                User?    @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@index([jobId])
  @@index([userId])
  @@index([createdAt])
  @@index([ipAddress])
}

model Subscription {
  id                  String   @id @default(cuid())
  userId              String
  type                String   // "VERIFIED_BADGE", "UNLIMITED_SPONSORED"
  status              String   @default("active")  // "active", "cancelled", "expired"
  startDate           DateTime @default(now())
  endDate             DateTime
  price               Float
  autoRenew           Boolean  @default(true)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([type])
  @@index([status])
  @@index([endDate])
}

model JobLike {
  id                  String   @id @default(cuid())
  jobId               String
  userId              String
  createdAt           DateTime @default(now())

  job                 Job      @relation(fields: [jobId], references: [id], onDelete: Cascade)
  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([jobId, userId])
  @@index([jobId])
  @@index([userId])
}

model JobTag {
  id                  String   @id @default(cuid())
  name                String
  color               String   @default("#3b82f6")
  description         String?
  createdBy           String
  jobCount            Int      @default(0)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  jobTagAssignments   JobTagAssignment[]

  @@index([createdBy])
  @@index([name])
  @@index([createdAt])
}

model JobTagAssignment {
  id                  String   @id @default(cuid())
  jobId               String
  tagId               String
  assignedAt          DateTime @default(now())

  tag                 JobTag   @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([jobId, tagId])
  @@index([jobId])
  @@index([tagId])
}

model Interview {
  id                  String   @id @default(cuid())
  jobId               String
  candidateId         String
  candidateName       String
  candidateEmail      String
  scheduledAt         DateTime
  duration            Int      @default(60)  // minutes
  status              String   @default("scheduled")  // "scheduled", "completed", "cancelled", "no_show"
  interviewType       String   @default("phone")  // "phone", "video", "in_person"
  notes               String?
  meetingLink         String?
  location            String?
  createdBy           String
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@index([jobId])
  @@index([candidateId])
  @@index([createdBy])
  @@index([scheduledAt])
  @@index([status])
}

model InterviewAvailability {
  id                  String   @id @default(cuid())
  userId              String
  dayOfWeek           Int      // 0 = Sunday, 1 = Monday, etc.
  startTime           String   // "09:00"
  endTime             String   // "17:00"
  isActive            Boolean  @default(true)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@index([userId])
  @@index([dayOfWeek])
}

model InterviewException {
  id                  String   @id @default(cuid())
  userId              String
  date                DateTime
  reason              String?
  isAvailable         Boolean  @default(false)  // false = blocked, true = special availability
  startTime           String?
  endTime             String?
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@index([userId])
  @@index([date])
}

model TeamMember {
  id                  String   @id @default(cuid())
  employerId          String
  email               String
  name                String?
  role                String   // "admin", "recruiter", "hiring_manager", "viewer"
  status              String   @default("pending")  // "pending", "active", "inactive"
  invitedAt           DateTime @default(now())
  acceptedAt          DateTime?
  permissions         String?  // JSON string of permissions
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@unique([employerId, email])
  @@index([employerId])
  @@index([email])
  @@index([status])
}

model CandidateSearch {
  id                  String   @id @default(cuid())
  userId              String
  searchName          String
  jobTitle            String?
  location            String?
  country             String?
  experienceLevel     String?
  skills              String?  // JSON array
  savedAt             DateTime @default(now())
  lastUsed            DateTime @default(now())

  @@index([userId])
  @@index([lastUsed])
}

// Job Fit Grading System Models
model JobFitCriteria {
  id                    String   @id @default(cuid())
  jobId                 String   @unique
  
  // Education Requirements
  minEducation          String?  // "high_school", "bachelor", "master", "phd"
  preferredEducation    String?
  certificationsRequired String? // JSON array
  
  // Experience Requirements
  minYearsExperience    Int      @default(0)
  preferredYearsExperience Int?
  relevantIndustry      String?
  
  // Essential Skills (Soft Skills)
  essentialSkills       String?  // JSON array with weights
  essentialSkillsWeight Int      @default(20)
  
  // Technical Skills (Hard Skills)
  technicalSkills       String?  // JSON array with proficiency levels
  technicalSkillsWeight Int      @default(30)
  
  // Personal Attributes
  personalAttributes    String?  // JSON array
  attributesWeight      Int      @default(15)
  
  // Cultural Fit
  culturalValues        String?  // JSON array
  workStyle             String?
  culturalWeight        Int      @default(10)
  
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  
  job                   Job      @relation(fields: [jobId], references: [id], onDelete: Cascade)
  
  @@index([jobId])
}

model ApplicantProfile {
  id                    String   @id @default(cuid())
  userId                String   @unique
  
  // Education Details
  educationLevel        String?  // "high_school", "bachelor", "master", "phd"
  degrees               String?  // JSON array
  certifications        String?  // JSON array
  relevantCourses       String?  // JSON array
  
  // Experience Details
  totalYearsExperience  Int      @default(0)
  currentRole           String?
  industries            String?  // JSON array
  achievements          String?  // JSON array
  
  // Essential Skills (Soft Skills)
  softSkills            String?  // JSON array with self-rating
  
  // Technical Skills (Hard Skills)
  hardSkills            String?  // JSON array with proficiency level
  
  // Personal Attributes
  workStyle             String?
  desiredResponsibilities String?
  personalTraits        String?  // JSON array
  
  // Cultural Fit
  workEnvironmentPref   String?
  values                String?  // JSON array
  teamSizePreference    String?
  
  // Profile Completeness
  profileCompleteness   Int      @default(0) // Percentage 0-100
  
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  
  user                  User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  fitScores             JobFitScore[]
  
  @@index([userId])
}

model JobFitScore {
  id                    String   @id @default(cuid())
  jobId                 String
  applicantId           String
  
  // Category Scores (0-100)
  educationScore        Int      @default(0)
  experienceScore       Int      @default(0)
  essentialSkillsScore  Int      @default(0)
  technicalSkillsScore  Int      @default(0)
  attributesScore       Int      @default(0)
  culturalFitScore      Int      @default(0)
  
  // Overall Score
  overallScore          Int      @default(0)
  
  // Status per category
  educationStatus       String   @default("failed") // "passed", "partially", "failed"
  experienceStatus      String   @default("failed")
  essentialSkillsStatus String   @default("failed")
  technicalSkillsStatus String   @default("failed")
  attributesStatus      String   @default("failed")
  culturalFitStatus     String   @default("failed")
  
  calculatedAt          DateTime @default(now())
  
  job                   Job      @relation(fields: [jobId], references: [id], onDelete: Cascade)
  applicantProfile      ApplicantProfile @relation(fields: [applicantId], references: [id], onDelete: Cascade)
  
  @@unique([jobId, applicantId])
  @@index([jobId])
  @@index([applicantId])
}

// ========================================
// NEW APPLICANT ENHANCEMENT FEATURES
// ========================================

// Job Alerts System
model JobAlert {
  id                  String   @id @default(cuid())
  userId              String
  title               String?  // Keyword search
  location            String?
  jobType             String?  // full_time, part_time, etc.
  category            String?
  minSalary           Int?
  experienceLevel     String?
  isActive            Boolean  @default(true)
  frequency           String   @default("instant") // instant, daily, weekly
  lastSent            DateTime?
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([isActive])
  @@index([frequency])
}

// Resume Builder
model Resume {
  id                  String   @id @default(cuid())
  userId              String
  title               String   @default("My Resume")
  templateStyle       String   @default("professional") // professional, modern, creative
  
  // Personal Info
  fullName            String?
  email               String?
  phone               String?
  location            String?
  website             String?
  linkedin            String?
  github              String?
  
  // Professional Summary
  summary             String?
  
  // Work Experience (JSON array)
  workExperience      String?  // [{ company, title, startDate, endDate, description, achievements }]
  
  // Education (JSON array)
  education           String?  // [{ school, degree, field, startDate, endDate, gpa, honors }]
  
  // Skills (JSON array)
  skills              String?  // [{ name, proficiency }]
  
  // Certifications (JSON array)
  certifications      String?  // [{ name, issuer, date, expiryDate, credentialId }]
  
  // Projects (JSON array)
  projects            String?  // [{ name, description, technologies, url, startDate, endDate }]
  
  // Languages (JSON array)
  languages           String?  // [{ name, proficiency }]
  
  // References
  references          String?  // [{ name, title, company, email, phone, relationship }]
  
  // ATS Score
  atsScore            Int      @default(0)
  lastScoreCheck      DateTime?
  
  isDefault           Boolean  @default(false)
  isPdf               Boolean  @default(false)
  pdfUrl              String?
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([isDefault])
}

// Cover Letter Templates
model CoverLetter {
  id                  String   @id @default(cuid())
  userId              String
  jobId               String?
  title               String   @default("Cover Letter")
  content             String   // Full letter content
  
  // Template variables
  companyName         String?
  hiringManager       String?
  position            String?
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([jobId])
}

// Interview Preparation
model InterviewPrep {
  id                  String   @id @default(cuid())
  userId              String
  jobId               String?
  companyName         String?
  position            String?
  interviewDate       DateTime?
  interviewType       String?  // phone, video, onsite, technical
  
  // Preparation Notes
  companyResearch     String?
  questionsToAsk      String?  // JSON array
  answersPrepped      String?  // JSON array of Q&A
  
  // Practice Sessions
  practiceCount       Int      @default(0)
  lastPracticed       DateTime?
  
  status              String   @default("preparing") // preparing, scheduled, completed, cancelled
  outcome             String?  // passed, rejected, waiting
  notes               String?
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  practiceSessions    InterviewPracticeSession[]

  @@index([userId])
  @@index([jobId])
  @@index([status])
}

// Interview Practice Sessions
model InterviewPracticeSession {
  id                  String   @id @default(cuid())
  interviewPrepId     String
  questionAsked       String
  userAnswer          String?
  confidence          Int?     // 1-5 rating
  duration            Int?     // seconds
  recordingUrl        String?
  
  createdAt           DateTime @default(now())

  interviewPrep       InterviewPrep @relation(fields: [interviewPrepId], references: [id], onDelete: Cascade)

  @@index([interviewPrepId])
}

// Application Notes & Follow-ups
model ApplicationNote {
  id                  String   @id @default(cuid())
  applicationId       String
  noteType            String   @default("general") // general, follow_up, interview, offer, rejection
  content             String
  reminderDate        DateTime?
  isCompleted         Boolean  @default(false)
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  application         Application @relation(fields: [applicationId], references: [id], onDelete: Cascade)

  @@index([applicationId])
  @@index([reminderDate])
  @@index([isCompleted])
}

// Career Resources & Articles
model CareerResource {
  id                  String   @id @default(cuid())
  title               String
  category            String   // resume_tips, interview_prep, salary_negotiation, career_advice
  content             String
  author              String?
  readTime            Int?     // minutes
  tags                String?  // JSON array
  isPublished         Boolean  @default(true)
  viewCount           Int      @default(0)
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@index([category])
  @@index([isPublished])
}

// Job Comparisons
model JobComparison {
  id                  String   @id @default(cuid())
  userId              String
  name                String   @default("Comparison")
  jobIds              String   // JSON array of job IDs
  notes               String?
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

// Application Analytics
model ApplicationStats {
  id                  String   @id @default(cuid())
  userId              String   @unique
  
  // Application Metrics
  totalApplications   Int      @default(0)
  pendingApplications Int      @default(0)
  rejectedApplications Int     @default(0)
  acceptedApplications Int     @default(0)
  
  // Response Metrics
  averageResponseTime Float    @default(0) // days
  interviewRate       Float    @default(0) // percentage
  offerRate           Float    @default(0) // percentage
  
  // Activity Metrics
  weeklyApplications  Int      @default(0)
  monthlyApplications Int      @default(0)
  lastApplicationDate DateTime?
  
  // Success Metrics
  bestCategory        String?
  bestJobType         String?
  bestLocation        String?
  
  updatedAt           DateTime @updatedAt

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

// Skills Gap Analysis
model SkillsGapAnalysis {
  id                  String   @id @default(cuid())
  userId              String
  jobId               String
  
  // Gap Analysis
  missingSkills       String?  // JSON array
  weakSkills          String?  // JSON array (skills user has but needs improvement)
  matchingSkills      String?  // JSON array
  
  // Recommendations
  coursesRecommended  String?  // JSON array
  certificationsRecommended String?  // JSON array
  booksRecommended    String?  // JSON array
  
  improvementPlan     String?  // Text plan
  estimatedTimeToReady Int?    // weeks
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  user                User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([jobId])
}

